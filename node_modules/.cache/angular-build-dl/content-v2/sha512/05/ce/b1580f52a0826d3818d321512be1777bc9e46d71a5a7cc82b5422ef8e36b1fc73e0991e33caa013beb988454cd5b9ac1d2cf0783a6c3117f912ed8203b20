{"version":3,"sources":["webpack:///src/app/pages/auth/login/login.page.html","webpack:///src/app/pages/auth/register/register.page.html","webpack:///src/app/pages/auth/login/login.page.scss","webpack:///src/app/pages/auth/login/login.page.ts","webpack:///src/app/pages/auth/register/register.page.scss","webpack:///src/app/pages/auth/register/register.page.ts","webpack:///src/app/services/alert.service.ts","webpack:///src/app/services/auth.service.ts","webpack:///src/app/services/env.service.ts"],"names":["LoginPage","modalController","authService","navCtrl","alertService","env","dismiss","dismissLogin","create","component","registerModal","present","form","console","log","value","email","password","login","subscribe","data","presentToast","error","toast","message","navigateRoot","selector","template","RegisterPage","dismissRegister","loginModal","register","fName","lName","AlertService","toastController","duration","position","color","providedIn","AuthService","http","storage","isLoggedIn","httpOptions","headers","post","API_URL","pipe","token","setItem","then","get","remove","user","getItem","EnvService"],"mappings":"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","file":"default~pages-auth-login-login-module~pages-auth-register-register-module~pages-landing-landing-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-button color=\\\"light\\\" (click)=\\\"dismissLogin()\\\">Close</ion-button>\\n    <ion-title>Login</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content padding>\\n  <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"login(form)\\\" method=\\\"post\\\">\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Email</ion-label>\\n      <ion-input ngModel type=\\\"email\\\" name=\\\"email\\\"></ion-input>\\n    </ion-item>\\n  \\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Password</ion-label>\\n      <ion-input ngModel type=\\\"password\\\" name=\\\"password\\\"></ion-input>\\n    </ion-item>\\n  \\n    <p text-right>Forgot Password?</p>\\n  \\n    <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">Login</ion-button>\\n  </form>\\n  <p text-center>Don't have a account?</p>\\n  <ion-button expand=\\\"full\\\" color=\\\"danger\\\" (click)=\\\"registerModal()\\\">Register</ion-button>\\n</ion-content>\\n\\n<!-- <ion-header>\\n  <ion-toolbar>\\n    <ion-title>login</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n</ion-content> -->\\n\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-button color=\\\"light\\\" (click)=\\\"dismissRegister()\\\">Close</ion-button>\\n    <ion-title>Register</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content padding>\\n  <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"register(form)\\\" method=\\\"post\\\">\\n    <ion-item>\\n        <ion-label position=\\\"floating\\\">Nombre</ion-label>\\n        <ion-input ngModel name=\\\"fName\\\"></ion-input>\\n    </ion-item>\\n  \\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Apellido</ion-label>\\n      <ion-input ngModel name=\\\"lName\\\"></ion-input>\\n    </ion-item>\\n  \\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Email</ion-label>\\n      <ion-input type=\\\"email\\\" ngModel name=\\\"email\\\"></ion-input>\\n    </ion-item>\\n  \\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Password</ion-label>\\n      <ion-input type=\\\"password\\\" ngModel name=\\\"password\\\"></ion-input>\\n    </ion-item>\\n  \\n    <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"danger\\\">Register</ion-button>\\n  </form>\\n  <p text-center>Already have a account?</p>\\n  <ion-button expand=\\\"full\\\" color=\\\"primary\\\" (click)=\\\"loginModal()\\\">Login</ion-button>\\n</ion-content>\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2F1dGgvbG9naW4vbG9naW4ucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\nimport { ModalController, NavController } from '@ionic/angular';\nimport { RegisterPage } from '../register/register.page';\nimport { NgForm } from '@angular/forms';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { AlertService } from 'src/app/services/alert.service';\nimport { EnvService } from '../../../services/env.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n  constructor(\n    private modalController: ModalController,\n    private authService: AuthService,\n    private navCtrl: NavController,\n    private alertService: AlertService,\n    private env: EnvService,\n  ) { }\n\n  ngOnInit() {\n  }\n\n  // Descartar el modal de login\n  dismissLogin() {\n    this.modalController.dismiss();\n  }\n\n  //\n  async registerModal(){\n    this.dismissLogin();\n    const registerModal = await this.modalController.create({\n      component: RegisterPage\n    });\n    return await registerModal.present();\n  }\n\n  login(form: NgForm) {\n    console.log(form.value.email, form.value.password)\n    this.authService.login(form.value.email, form.value.password).subscribe(\n      data => {\n        this.alertService.presentToast(\"SesiÃ³n Iniciada\");\n      },\n      error => {\n        console.log(error);\n        let toast = this.alertService.presentToast(error.message);\n      },\n      () => {\n        this.dismissLogin();\n        this.navCtrl.navigateRoot('/dashboard');\n      }\n    );\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2F1dGgvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\nimport { ModalController, NavController } from '@ionic/angular';\nimport { LoginPage } from '../login/login.page';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { NgForm } from '@angular/forms';\nimport { AlertService } from 'src/app/services/alert.service';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss'],\n})\nexport class RegisterPage implements OnInit {\n\n  constructor(\n    private modalController: ModalController,\n    private authService: AuthService,\n    private navCtrl: NavController,\n    private alertService: AlertService\n  ) { }\n\n  ngOnInit() {\n  }\n\n  // Dismiss Register Modal\n  dismissRegister() {\n    this.modalController.dismiss();\n  }\n  // On Login button tap, dismiss Register modal and open login Modal\n  async loginModal() {\n    this.dismissRegister();\n    const loginModal = await this.modalController.create({\n      component: LoginPage,\n    });\n    return await loginModal.present();\n  }\n  register(form: NgForm) {\n    this.authService.register(form.value.fName, form.value.lName, form.value.email, form.value.password).subscribe(\n      data => {\n        this.authService.login(form.value.email, form.value.password).subscribe(\n          data => {\n          },\n          error => {\n            console.log(error);\n          },\n          () => {\n            this.dismissRegister();\n            this.navCtrl.navigateRoot('/dashboard');\n          }\n        );\n        this.alertService.presentToast(data['message']);\n      },\n      error => {\n        console.log(error);\n      },\n      () => {\n        \n      }\n    );\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ToastController } from '@ionic/angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AlertService {\n\n  constructor(private toastController: ToastController) { }\n\n  async presentToast(message: any) {\n    const toast = await this.toastController.create({\n      message: message,\n      duration: 2000,\n      position: 'top',\n      color: 'dark'\n    });\n    toast.present();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\nimport { EnvService } from './env.service';\nimport { User } from '../models/user';\n// import { HTTP } from '@ionic-native/http/ngx';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  isLoggedIn = false;\n  token:any;\n  constructor(\n    private http: HttpClient,\n    private storage: NativeStorage,\n    private env: EnvService,\n  ) { }\n  login(email: String, password: String) {\n    \n    const httpOptions = {\n      headers: new HttpHeaders({\n        'Accept': 'application/json, text/plain',\n        'Content-Type': 'application/json'\n      })\n    };\n\n    return this.http.post(this.env.API_URL + 'api/auth/login',\n      {email: email, password: password}, httpOptions\n    ).pipe(\n      tap(token => {\n        this.storage.setItem('token', token)\n        .then(\n          () => {\n            console.log('Token Stored');\n          },\n          error => console.error('Error storing item', error)\n        );\n        this.token = token;\n        this.isLoggedIn = true;\n        return token;\n      }),\n    );\n  }\n  register(fName: String, lName: String, email: String, password: String) {\n    return this.http.post(this.env.API_URL + 'api/auth/register',\n      {fName: fName, lName: lName, email: email, password: password},\n    )\n  }\n  logout() {\n    const headers = new HttpHeaders({\n      'Authorization': this.token[\"token_type\"]+\" \"+this.token[\"access_token\"]\n    });\n    return this.http.get(this.env.API_URL + 'api/auth/logout', { headers: headers },)\n    .pipe(\n      tap(data => {\n        this.storage.remove(\"token\");\n        this.isLoggedIn = false;\n        delete this.token;\n        return data;\n      })\n    )\n  }\n  user() {\n    const headers = new HttpHeaders({\n      'Authorization': this.token[\"token_type\"]+\" \"+this.token[\"access_token\"]\n    });\n    return this.http.get<User>(this.env.API_URL + 'api/auth/user', { headers: headers })\n    .pipe(\n      tap(user => {\n        return user;\n      })\n    )\n  }\n  getToken() {\n    return this.storage.getItem('token').then(\n      data => {\n        this.token = data;\n        if(this.token != null) {\n          this.isLoggedIn=true;\n        } else {\n          this.isLoggedIn=false;\n        }\n      },\n      error => {\n        this.token = null;\n        this.isLoggedIn=false;\n      }\n    );\n  }\n}","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EnvService {\n  API_URL = 'http://api.pormibahia.org/';\n  \n  constructor() { }\n}\n"]}